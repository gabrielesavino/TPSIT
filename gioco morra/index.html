<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gioco Morra Cinese</title>
    <style>
        #out2{
            font-size: large;
            color: #000000;
        }
        img {
            width: 100px;
            height: 100px;
            margin: 10px;
            cursor: pointer;
        }
        #timer {
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>Gioco Morra Cinese</h1>

    <div id="gioco">
        <p id="out1">Scegli la tua mossa:</p>
        <img src="pietra.png" alt="Pietra" id="pietra" />
        <img src="carta.png" alt="Carta" id="carta" />
        <img src="forbice.png" alt="Forbice" id="forbice" />
        
        <p id="out2"></p>
        <p id="timer"></p>

        <h2>Punteggio:</h2>
        <p id="score">0 - 0</p>
    </div>

<script>
    let morra = ["pietra", "carta", "forbice"];
    let scoreUser = 0;
    let scoreBot = 0;
    let numeroCasuale;
    let timer;

    // Funzione per calcolare il risultato della partita
    function morraScore(userChoice, botChoice) {
        if (userChoice === botChoice) {
            return "Pareggio!";
        } else if (
            (userChoice === "pietra" && botChoice === "forbice") ||
            (userChoice === "carta" && botChoice === "pietra") ||
            (userChoice === "forbice" && botChoice === "carta")
        ) {
            scoreUser++;
            return "Hai vinto!";
        } else {
            scoreBot++;
            return "Hai perso!";
        }
    }

    // Funzione per generare una scelta casuale del bot
    function getBotChoice() {
        numeroCasuale = Math.floor(Math.random() * 3);
        return morra[numeroCasuale];
    }

    // Funzione per gestire il timer e il risultato
    function startGame(userChoice) {
        let counter = 3;
        let timerDisplay = document.getElementById("timer");
        timerDisplay.innerHTML = `Inizio tra ${counter}...`;
        
        timer = setInterval(() => {
            counter--;
            timerDisplay.innerHTML = `Inizio tra ${counter}...`;
            if (counter === 0) {
                clearInterval(timer);
                let botChoice = getBotChoice();
                let result = morraScore(userChoice, botChoice);

                document.getElementById("out2").innerHTML = 
                    `Bot ha scelto: ${botChoice}. ${result}`;

                document.getElementById("score").innerHTML = `${scoreUser} - ${scoreBot}`;
            }
        }, 1000);
    }

    // Ascoltatore per le immagini cliccabili
    document.getElementById("pietra").onclick = function() {
        startGame("pietra");
    };
    document.getElementById("carta").onclick = function() {
        startGame("carta");
    };
    document.getElementById("forbice").onclick = function() {
        startGame("forbice");
    };

</script>

</body>
</html>
